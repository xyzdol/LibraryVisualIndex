# **基于可视化的图书索引系统 — 需求规格说明书（SRS）**

**版本：V1.0 — 阶段 1**
 **项目周期：2025**

------

# **1. 项目概述（Overview）**

本项目旨在构建一个 **基于可视化展示的图书索引系统**，用于支持图书馆用户快速、直观地查找图书信息，包括：图书位置、书籍状态、书籍分类颜色显示、最新借阅情况、评论功能、广播功能等。本系统需要从数据库层面完整支持所有功能，包括 CDM、LDM、PDM 和 SQL，实现完整且准确的数据建模。

最终系统包含：

- 数据库设计（占 90% 分数）：
  - **概念模型（CDM）**
  - **逻辑模型（LDM）**
  - **物理模型（PDM）**
  - **SQL 脚本（schema + sample data）**
- 简易前端布局（本地界面，不要求正式 UI）
- 后端接口，用于与数据库交互（FastAPI + SQL Server）

展示（PPT、视频）由其他成员完成。

------

# **2. 系统角色与目标用户（Actors）**

系统主要面向三个角色：

## 2.1 普通用户（读者）

可进行的操作：

- 搜索图书
- 查看图书详情（位置、剩余数量、归还日期）
- 查看书籍的馆内位置可视化图
- 查看当月热门借阅排行榜
- 查看评论
- 登录后发表评论（可匿名发言）
- 查看广播信息（寻人/寻物）
- 登录后发布广播（可匿名）

## 2.2 图书管理员（系统后台）

可进行的操作（数据库层面支持即可）：

- 维护图书基本信息
- 维护图书实体副本信息（副本位置/条形码）
- 创建借阅记录
- 维护分类、区域、书架结构（仅数据库层实现）

## 2.3 系统管理员

可进行操作（数据库层支持）：

- 管理用户（禁用用户等）
- 管理广播状态（删除、过期）

------

# **3. 功能需求（Functional Requirements）**

来自题目要求（并进一步工程化），本系统需要满足以下功能：

------

## **3.1 真实场景全景显示图书馆情况（F1）**

系统需在前端展示一个“馆区 + 书架坐标”的可视化平面图，包括：

- 区域（Area）
- 书架（Shelf）
- 书架位置（2D 坐标）
- 不同分类对应的颜色

前端可通过 HTML + CSS 网格呈现；
 数据库需提供坐标数据与分类颜色。

------

## **3.2 查询图书状态与位置（F2）**

当用户搜索某本书时，系统需显示：

### A. 如果图书存在（至少一个副本）：

- 图书基本信息（书名、作者、出版社、简介等）
- 图书分类及颜色
- 所有实体副本（copy）的：
  - 书架位置
  - 剩余数量（status = available 数量）
- 若某副本借出，需要显示其最近应还日期

### B. 如果所有副本均借出：

- 提示“全部借出”
- 显示**最近应还日期**（所有副本的 due_date 最早者）

### C. 如果图书不存在：

- 提示“图书馆没有该书”

------

## **3.3 显示寻书路径，可触屏调整视角（F3）**

数据库层需求：

- 书架表需提供 (pos_x, pos_y) 坐标
- 可以计算从入口（0,0 或某固定位置）到书架的路径数据

前端层需要：

- 展示图书所在书架位置
- 绘制路径线（简化为直线/折线）
- 支持放大/缩小（视角调整）

------

## **3.4 颜色区分不同类型书籍（F4）**

Category 表中需提供：

- category_id
- name
- color_hex（如 #FFCC00）

前端使用 color_hex 渲染不同书架或书籍标签。

------

## **3.5 当月值得借阅图书排行榜（F5）**

数据库需提供：

- 借阅记录表（BorrowRecord）
- 通过视图（View）统计最近 30 天借阅量
- 排序得出热门榜单 TOP 10

视图例如：

```
monthly_hot_books(book_id, title, borrow_count)
```

------

## **3.6 评论区（实名注册，可匿名发言）（F6）**

数据库需支持：

- 用户表（User）
- 评论表（Comment）
- 评论字段：
  - content
  - created_at
  - is_anonymous（是否匿名）
  - user_id（即使匿名也记录，以满足管理审核）

------

## **3.7 匿名寻人寻物广播（区域限定）（F7）**

数据库需支持：

- 广播表（Broadcast）
- 字段：
  - type（lost_item / find_person）
  - content
  - is_active
  - target_area_id（指定区域，仅该区域用户可见）

------

# **4. 数据需求（将用于 CDM）**

系统必须存储以下数据实体：

1. **User（用户）**
2. **Category（分类）**
3. **Area（图书馆区域）**
4. **Shelf（书架）**
5. **Book（图书基本信息）**
6. **BookCopy（图书实体副本）**
7. **BorrowRecord（借阅记录）**
8. **Comment（图书评论）**
9. **Broadcast（寻人寻物广播）**

这些实体将在下一阶段用于构建 **概念模型（CDM）**。

------

# **5. 非功能需求（Non-functional Requirements）**

### 5.1 界面友好（NFR1）

系统前端布局清晰，可视化图书馆平面图易于理解。

### 5.2 操作便捷（NFR2）

搜索功能需快速响应；结果展示简洁明了。

### 5.3 数据安全（NFR3）

用户密码必须采用哈希存储（后端实现）。

### 5.4 数据一致性与完整性（NFR4）

数据库应使用主键、外键、约束确保数据正确性。

### 5.5 扩展性（NFR5）

未来可扩展更多功能，如预约图书、标签系统等。

------

# **6. 创新点设计（至少 3 个）**

为满足课程要求（≥3 个创新点，每个创新点 5 分），我们初步规划以下创新点：

------

### **创新点 1：馆内热力图（借阅频率可视化）**

根据各区域的借阅量变化，展示区域热度。

- 数据来源：BorrowRecord
- 可视化：颜色深度表示区域热门程度

------

### **创新点 2：基于借阅历史的“你可能还喜欢”推荐**

简单基于“协同过滤”思想：

- 借过某类型书籍的用户，也查看/借阅了另一类型书籍
- SQL 即可实现，无需机器学习

------

### **创新点 3：广播到期自动失效**

Broadcast 表新增 expire_at 字段：

- 系统根据时间过滤仅显示有效广播
- 模拟微信“撤回/过期”功能

------

# **7. 系统架构概述（整体规划）**

本系统分为三部分：

### A）数据库（重点，占 90% 分）

- CDM（概念模型）
- LDM（逻辑模型）
- PDM（物理模型）
- SQL Server 建表脚本
- 样例数据
- 关键查询 SQL（排行榜、查书、路径）

### B）后端 API（作为数据库与前端的桥梁）

- Python + FastAPI
- pyodbc 或 SQLAlchemy 连接 SQL Server

### C）前端布局（本地即可）

- HTML + CSS + JS
- 可视化书架网格
- 调用后端 API

------

# **8. 版本控制（Git）策略**

本项目必须在关键节点保持快照：

### 必须 commit 的节点：

1. 完成 SRS 文档（本阶段）
2. 完成 CDM 文件
3. 完成 LDM 文件
4. 完成 PDM + SQL Server 脚本
5. 后端第一次跑通数据库
6. 前端第一次调用 API 成功
7. 每次重要数据库修改前先备份 `.pdm`